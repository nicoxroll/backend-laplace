config:
  layout: elk
---
flowchart TD
 subgraph Frontend["Frontend (Next.js)"]
        A["Analyze Interface"]
        B["Chat Interface"]
        C["Knowledge Manager"]
        D["Repo Indexer"]
        E["Auth Interface"]
  end
 subgraph Backend["Backend (FastAPI)"]
        F["API Gateway"]
        G["RAG Engine"]
        H["Model Router"]
        I["Cache Manager"]
        J["BERT Integration"]
        K["Auth Service"]
        L["Indexing Service"]
        M["GitHub/GitLab Client"]
        N["File Processor\n(ROPE Chunking)"]
        O["Vector Optimizer\n(Batch + CompresiÃ³n)"]
  end
 subgraph Data["Databases & Services"]
        P[("PostgreSQL\n(Users/Metadata)")]
        Q[("Weaviate\n(Hybrid Search)")]
        R[("Redis\n(Session/Cache)")]
        S[("Ollama Agents
            - Code (deepseek)
            - Chat (llama3)
            - Doc (llama2)")]
        T["GitHub API"]
        U["GitLab API"]
  end
    E -- POST /auth/provider --> F
    A -- POST /analyze --> F
    B -- POST /chat --> F
    C -- POST /upload --> F
    D -- POST /index --> F
    F -- Routing --> G
    F -- Auth Flow --> K
    F -- File Processing --> N
    F -- Repo Indexing --> L
    G -- Query Expansion --> J
    G -- Hybrid Search --> Q
    G -- Cache --> I
